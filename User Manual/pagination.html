<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Limeberry - Data Pagination </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="assets/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="assets/css/style.css" />
</head>
<body>

        <nav class="navbar navbar-default">
        <div class="container-fluid">
            <div class="navbar-header">
                    <a class="navbar-brand" href="index.html">
                            <img src="assets/img/limeberry_logo_alpha.png" alt="Limeberry" height="">
                    </a>
                <a class="navbar-brand" href="index.html">Limeberry Documentation</a>
            </div>
            
            <!--
            <ul class="nav navbar-nav">
                <li><a href="index.html">All Topics</a></li>
            </ul>
            -->
        </div>
    </nav>

    <div style="padding:40px;">

        <div class="row">
            <div class="col-md-8">

                <a href="index.html" class="btn btn-default"  ><img src="assets/img/ico_back.png"/> Topics</a>
                <br><br>
                
                <div class="graybox">
                        <h3>Data Pagination</h3>
                        <ol class="ug-tocs">
                            <li><a href="#pagedescription">Pagination Engine</a></li>
                            <li>Methods
                                <ol class="ug-tocs">
                                            <li> <a href="pagination.html#__construct">__construct()</a></li>
                                            <li> <a href="pagination.html#Paginate">Paginate()</a></li>
                                            <li> <a href="pagination.html#FetchResults">FetchResults()</a></li>
                                            <li> <a href="pagination.html#SetLinkStyle">SetLinkStyle()</a></li>
                                            <li> <a href="pagination.html#BuildLinks">BuildLinks()</a></li>
                                            <li> <a href="pagination.html#BackLink">BackLink()</a></li>
                                            <li> <a href="pagination.html#NextLink">NextLink()</a></li>
                                            
                                          
                                </ol>
                            </li>
                    
                    
                            <li>Creating Pagination
                                <ol class="ug-tocs">
                                             <li> <a href="pagination.html#entry">Create Pagination</a></li>
                                            <li> <a href="pagination.html#code_controller">Code Controller </a></li>
                                            <li> <a href="pagination.html#code_view">Code View </a></li>
                                            <li> <a href="pagination.html#result">Result </a></li>
                                          
                                </ol>
                            </li>
                    
                        </ol>
                        <br>
                        <!-- CONTENT START -->
                    
                        <br><br>
                        <h4 id="pagedescription">Pagination Engine</h4>
                        <p>
                           limeberry Framework's pagination is very easy to use. This topic explained via 
                           tutorial in documentation.
                        </p>
                   <br>
                    

                    <h4 id="__construct">__construct()</h4>
                    <p>
                    Set current page number this value gets from controller and will be passed with variables to view.
                    
                    <pre>
$pag = new <span class="ug-bold ug-keyword">Pagination</span>(<span class="ug-type">integer</span>  $currentpage_param = 1)
                    </pre>
                    <br>
                    <code>$currentpage_param</code> Current page number
                    </p>
                    
                    
                    
                    <h4 id="Paginate">Paginate()</h4>
                    <p>
                    Data pagination function
                    <pre>
$pag-><span class="ug-bold ug-method">Pagination</span>(<span class="ug-type">Array</span> $data_set,<span class="ug-type">integer</span>  $per_page= 1)
                    </pre>
                    <br>
                    <code>$data_set</code> Records to be displayed <br>
                    <code>$per_page</code> Records per page default 10 <br>
                    
                    </p>
                    
                    
                    
                    
                    
                    <h4 id="FetchResults">FetchResults()</h4>
                    <p>
                    Returns data array with paginated array slices
                    <pre>
$pag-><span class="ug-bold ug-method">FetchResults</span>() : <span class="ug-type">Array</span>
                    </pre>
                    <br>
                    
                    </p>
                    
                    
                    
                    
                    
                    
                    <h4 id="SetLinkStyle">SetLinkStyle()</h4>
                    <p>
                    Set attributes for links
                    <pre>
$pag-><span class="ug-bold ug-method">SetLinkStyle</span>(<span class="ug-type">Array</span> $attrb)
                    </pre>
                    <br>
                    <code>$attrb</code> attributes for link tag, array key as tag and value as set data.<br>
                    
                    
                    </p>
                    
                    
                    
                    
                    
                    <h4 id="BuildLinks">BuildLinks()</h4>
                    <p>
                    Returns links for paginated data
                    <pre>
$pag-><span class="ug-bold ug-method">BuildLinks</span>(<span class="ug-type">string</span> $controller, <span class="ug-type">string</span> $action)
                    </pre>
                    <br>
                    <code>$controller</code> Controller name which loads pagination<br>
                    
                    <code>$action</code> action name in controller which loads pagination<br>
                    
                    
                    </p>
                    
                    
                    
                    
                    
                    <h4 id="BackLink">BackLink()</h4>
                    <p>
                    Returns back link if not first page of data data
                    <pre>
$pag-><span class="ug-bold ug-method">BackLink</span>(<span class="ug-type">string</span> $controller, <span class="ug-type">string</span> $action, <span class="ug-type">string</span> $text = "Back") 
                    </pre>
                    <br>
                    <code>$controller</code> Controller name which loads pagination<br>
                    
                    <code>$action</code> action name in controller which loads pagination<br>
                    
                    <code>$text</code> text to show on 'Back' button default: Back<br>
                    
                    </p>
                    
                    
                    
                    <h4 id="BackLink">NextLink()</h4>
                    <p>
                    Returns next link if not last page of data data
                    <pre>
$pag-><span class="ug-bold ug-method">NextLink</span>(<span class="ug-type">string</span> $controller, <span class="ug-type">string</span> $action, <span class="ug-type">string</span> $text = "Next") 
                    </pre>
                    <br>
                    <code>$controller</code> Controller name which loads pagination<br>
                    
                    <code>$action</code> action name in controller which loads pagination<br>
                    
                    <code>$text</code> text to show on 'Next' button default: Next<br>
                    
                    </p>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <br><hr><br>
                    
                        <h4 id="entry">Create Pagination</h4>
                        <p>
                            Assume that we are developing a blog application. We have to show all registered users in a list. To complete this task we will do the followings;
                            <br>
                    
                            <ol>
                                <li>Create a Users controller</li>
                                <li>Create a listAction</li>
                                <li>Design the page which users will be listed</li>
                                <li>Code: listAction</li>
                                <li>Code: view page</li>
                            </ol>
                    
                    
                            <br>
                            In that case let's start with creating a controller and a listAction.
                            <br>
                    
                           We are going to add a new controller in <span class="ug-code ug-keyword">controller</span> directory with name 'usersController.php'.
                           Our usersController.php file need to contain a class named users and a function called <code>listAction</code>.
                           <br>
                    
                    <pre id="code_controller">
use limeberry\Controller As plController;
use limeberry\visual\Pagination;
use limeberry\dataman\mySqlConnect;
use limeberry\dataman\MySqlCommand;


class usersController extends plController
{
    public function indexAction()
    {
        //nothing to do;
    }

    public function listAction($param = null)
    {
        //set current page parameter in view
        
        $this->View->intCurrentPage = $param; //This paramater is also set on related view to get parameter
        
        //get users from database
        $con = new mysqlconnect("localhost", "root", "", "papp");
        $cmd = new MySqlCommand("select * from users", $con->Source());
        
        
        //send as array to view all records...
        $this->View->data_set = $cmd->FetchAll();

        $this->View->Render("list.php"); //load view to screen
    }
    
}
                    </pre>
                    This is our controller. in listAction we send to view current page number as parameter and an array of records from database.
                    <br><br>
                    
                    Later we need to get all this information from view.
                    
                    
                    
                    
                    <br> <br>
                    <br>
                    
                    view\list.php
                    <br>
                    <pre id="code_view">
< ?php
use limeberry\page;
use limeberry\visual\pagination;


//We are creating a paginator which gets current page as parameter
//[NOTE]: intCurrentPage variable sent from controller....
$userlist = new pagination($this->intCurrentPage);
//We get in paginate method all users and we want to show 5 records per page.
$userlist->Paginate($this->data_set, 5);


$view = new page();
$view->SetLayout("master.phtml");


$view->BeginContent();?>


< h1>User List< /h1>

<?php
foreach ($userlist->FetchResults() as $user) {
    echo "Name: ".$user["firstname"]."< br>";
    echo "Surname: ".$user["lastname"]."< br>";
    echo "Email: ".$user["email"]."< br>< hr>";
}
    $userlist->setLinkStyle(array("class"=>"btn btn-primary", "style"=>"margin-right:5px; margin-left:5px;"));// we set button link css class and styles
    echo $userlist->BackLink("users", "list", "Previous"); //this is optional, shows a back button on links
    echo $userlist->BuildLinks("users", "list"); // this is important: printing all page links ex: 1 2 3 4 
    echo $userlist->NextLink("users", "list", "Next"); // this is optional, shows a next button.
    

?>

    
< ?php $view->EndContent(); ?>
                    </pre>
                        
                    
                    <br><br>
                    
                    Result:
                    <pre id="result">
<img src="assets/img/pagination.png" style="width: 100%">
                    
                    </pre>
                        </p>
                    
                    


                </div>
            </div>

            <!------------------------------------------------ ---------------------->
            <div class="col-md-4">
                <div class="graybox">
                    <h4> <img src="assets/img/ico_gear.png" width="22" height="22"/> Namespace</h4>
                    <br>If you want to use this library, you need to import required namespace in your php code file. Required namespace:
                    <br><br><span>use <span class="ug-code ug-keyword ug-bold">limeberry\visual\Pagination;</span><br>
                
                </div>

            </div>
        </div>



    </div>

             
    <br><br>

    <center>
        (C) 2018 Limeberry Framework | All Rights Reserved
    </center>
    
</body>
</html>